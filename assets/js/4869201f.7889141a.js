"use strict";(self.webpackChunkhome=self.webpackChunkhome||[]).push([[517],{2013:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>E,contentTitle:()=>v,default:()=>O,frontMatter:()=>f,metadata:()=>y,toc:()=>T});var a=n(7462),o=n(7294),s=n(3905);const i="canvasContainer_veMi";var r=n(9477);class c extends r.O7d{constructor(e,t={}){const n=t.font;if(void 0===n)super();else{const a=n.generateShapes(e,t.size);t.depth=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),super(a,t)}this.type="TextGeometry"}}var u=function(e,t){var n,a,o,s,i,c,u;void 0===t&&console.warn('THREE.CameraControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.CameraControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=t,this.enabled=!0,this.target=new r.Pa4,this.trackball=!1,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:r.RsA.ROTATE,MIDDLE:r.RsA.DOLLY,RIGHT:r.RsA.PAN},this.touches={ONE:r.QmN.ROTATE,TWO:r.QmN.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.quaternion0=this.object.quaternion.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return f.phi},this.getAzimuthalAngle=function(){return f.theta},this.saveState=function(){l.target0.copy(l.target),l.position0.copy(l.object.position),l.quaternion0.copy(l.object.quaternion),l.zoom0=l.object.zoom},this.reset=function(){l.target.copy(l.target0),l.object.position.copy(l.position0),l.object.quaternion.copy(l.quaternion0),l.object.zoom=l.zoom0,l.object.updateProjectionMatrix(),l.dispatchEvent(p),l.update(),b=d.NONE},this.update=(n=new r.Pa4,a=(new r._fP).setFromUnitVectors(e.up,new r.Pa4(0,1,0)),o=a.clone().invert(),s=new r.Pa4,i=new r._fP,c=new r._fP,u=new r.Pa4,function(){var e=l.object.position;if(n.copy(e).sub(l.target),l.trackball){if(v.theta){u.set(0,1,0).applyQuaternion(l.object.quaternion);const e=l.enableDamping?l.dampingFactor:1;c.setFromAxisAngle(u,v.theta*e),l.object.quaternion.premultiply(c),n.applyQuaternion(c)}if(v.phi){u.set(1,0,0).applyQuaternion(l.object.quaternion);const e=l.enableDamping?l.dampingFactor:1;c.setFromAxisAngle(u,v.phi*e),l.object.quaternion.premultiply(c),n.applyQuaternion(c)}n.multiplyScalar(y),n.clampLength(l.minDistance,l.maxDistance)}else n.applyQuaternion(a),l.autoRotate&&b===d.NONE&&M(2*Math.PI/60/60*l.autoRotateSpeed),f.setFromVector3(n),l.enableDamping?(f.theta+=v.theta*l.dampingFactor,f.phi+=v.phi*l.dampingFactor):(f.theta+=v.theta,f.phi+=v.phi),f.theta=Math.max(l.minAzimuthAngle,Math.min(l.maxAzimuthAngle,f.theta)),f.phi=Math.max(l.minPolarAngle,Math.min(l.maxPolarAngle,f.phi)),f.makeSafe(),f.radius*=y,f.radius=Math.max(l.minDistance,Math.min(l.maxDistance,f.radius)),n.setFromSpherical(f),n.applyQuaternion(o);return!0===l.enableDamping?l.target.addScaledVector(E,l.dampingFactor):l.target.add(E),e.copy(l.target).add(n),!1===l.trackball&&l.object.lookAt(l.target),!0===l.enableDamping?(v.theta*=1-l.dampingFactor,v.phi*=1-l.dampingFactor,E.multiplyScalar(1-l.dampingFactor)):(v.set(0,0,0),E.set(0,0,0)),y=1,!!(T||s.distanceToSquared(l.object.position)>g||8*(1-i.dot(l.object.quaternion))>g)&&(l.dispatchEvent(p),s.copy(l.object.position),i.copy(l.object.quaternion),T=!1,!0)}),this.dispose=function(){l.domElement.removeEventListener("contextmenu",ne,!1),l.domElement.removeEventListener("mousedown",G,!1),l.domElement.removeEventListener("wheel",K,!1),l.domElement.removeEventListener("touchstart",$,!1),l.domElement.removeEventListener("touchend",te,!1),l.domElement.removeEventListener("touchmove",ee,!1),document.removeEventListener("mousemove",W,!1),document.removeEventListener("mouseup",V,!1),l.domElement.removeEventListener("keydown",J,!1)};var l=this,p={type:"change"},h={type:"start"},m={type:"end"},d={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},b=d.NONE,g=1e-6,f=new r.$V,v=new r.$V,y=1,E=new r.Pa4,T=!1,w=new r.FM8,O=new r.FM8,P=new r.FM8,N=new r.FM8,A=new r.FM8,k=new r.FM8,x=new r.FM8,R=new r.FM8,L=new r.FM8;function j(){return Math.pow(.95,l.zoomSpeed)}function M(e){v.theta-=e}function S(e){v.phi-=e}var D,C=(D=new r.Pa4,function(e,t){D.setFromMatrixColumn(t,0),D.multiplyScalar(-e),E.add(D)}),Y=function(){var e=new r.Pa4;return function(t,n){!0===l.screenSpacePanning?e.setFromMatrixColumn(n,1):(e.setFromMatrixColumn(n,0),e.crossVectors(l.object.up,e)),e.multiplyScalar(t),E.add(e)}}(),F=function(){var e=new r.Pa4;return function(t,n){var a=l.domElement;if(l.object.isPerspectiveCamera){var o=l.object.position;e.copy(o).sub(l.target);var s=e.length();s*=Math.tan(l.object.fov/2*Math.PI/180),C(2*t*s/a.clientHeight,l.object.matrix),Y(2*n*s/a.clientHeight,l.object.matrix)}else l.object.isOrthographicCamera?(C(t*(l.object.right-l.object.left)/l.object.zoom/a.clientWidth,l.object.matrix),Y(n*(l.object.top-l.object.bottom)/l.object.zoom/a.clientHeight,l.object.matrix)):(console.warn("WARNING: CameraControls.js encountered an unknown camera type - pan disabled."),l.enablePan=!1)}}();function _(e){l.object.isPerspectiveCamera?y/=e:l.object.isOrthographicCamera?(l.object.zoom=Math.max(l.minZoom,Math.min(l.maxZoom,l.object.zoom*e)),l.object.updateProjectionMatrix(),T=!0):(console.warn("WARNING: CameraControls.js encountered an unknown camera type - dolly/zoom disabled."),l.enableZoom=!1)}function z(e){l.object.isPerspectiveCamera?y*=e:l.object.isOrthographicCamera?(l.object.zoom=Math.max(l.minZoom,Math.min(l.maxZoom,l.object.zoom/e)),l.object.updateProjectionMatrix(),T=!0):(console.warn("WARNING: CameraControls.js encountered an unknown camera type - dolly/zoom disabled."),l.enableZoom=!1)}function H(e){w.set(e.clientX,e.clientY)}function I(e){N.set(e.clientX,e.clientY)}function X(e){if(1==e.touches.length)w.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);w.set(t,n)}}function q(e){if(1==e.touches.length)N.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);N.set(t,n)}}function Z(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,a=Math.sqrt(t*t+n*n);x.set(0,a)}function B(e){if(1==e.touches.length)O.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);O.set(t,n)}P.subVectors(O,w).multiplyScalar(l.rotateSpeed);var a=l.domElement;M(2*Math.PI*P.x/a.clientHeight),S(2*Math.PI*P.y/a.clientHeight),w.copy(O)}function Q(e){if(1==e.touches.length)A.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);A.set(t,n)}k.subVectors(A,N).multiplyScalar(l.panSpeed),F(k.x,k.y),N.copy(A)}function U(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,a=Math.sqrt(t*t+n*n);R.set(0,a),L.set(0,Math.pow(R.y/x.y,l.zoomSpeed)),_(L.y),x.copy(R)}function G(e){if(!1!==l.enabled){var t;switch(e.preventDefault(),l.domElement.focus?l.domElement.focus():window.focus(),e.button){case 0:t=l.mouseButtons.LEFT;break;case 1:t=l.mouseButtons.MIDDLE;break;case 2:t=l.mouseButtons.RIGHT;break;default:t=-1}switch(t){case r.RsA.DOLLY:if(!1===l.enableZoom)return;!function(e){x.set(e.clientX,e.clientY)}(e),b=d.DOLLY;break;case r.RsA.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===l.enablePan)return;I(e),b=d.PAN}else{if(!1===l.enableRotate)return;H(e),b=d.ROTATE}break;case r.RsA.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===l.enableRotate)return;H(e),b=d.ROTATE}else{if(!1===l.enablePan)return;I(e),b=d.PAN}break;default:b=d.NONE}b!==d.NONE&&(document.addEventListener("mousemove",W,!1),document.addEventListener("mouseup",V,!1),l.dispatchEvent(h))}}function W(e){if(!1!==l.enabled)switch(e.preventDefault(),b){case d.ROTATE:if(!1===l.enableRotate)return;!function(e){O.set(e.clientX,e.clientY),P.subVectors(O,w).multiplyScalar(l.rotateSpeed);var t=l.domElement;M(2*Math.PI*P.x/t.clientHeight),S(2*Math.PI*P.y/t.clientHeight),w.copy(O),l.update()}(e);break;case d.DOLLY:if(!1===l.enableZoom)return;!function(e){R.set(e.clientX,e.clientY),L.subVectors(R,x),L.y>0?_(j()):L.y<0&&z(j()),x.copy(R),l.update()}(e);break;case d.PAN:if(!1===l.enablePan)return;!function(e){A.set(e.clientX,e.clientY),k.subVectors(A,N).multiplyScalar(l.panSpeed),F(k.x,k.y),N.copy(A),l.update()}(e)}}function V(e){!1!==l.enabled&&(document.removeEventListener("mousemove",W,!1),document.removeEventListener("mouseup",V,!1),l.dispatchEvent(m),b=d.NONE)}function K(e){!1===l.enabled||!1===l.enableZoom||b!==d.NONE&&b!==d.ROTATE||(e.preventDefault(),e.stopPropagation(),l.dispatchEvent(h),function(e){e.deltaY<0?z(j()):e.deltaY>0&&_(j()),l.update()}(e),l.dispatchEvent(m))}function J(e){!1!==l.enabled&&!1!==l.enableKeys&&!1!==l.enablePan&&function(e){var t=!1;switch(e.keyCode){case l.keys.UP:F(0,l.keyPanSpeed),t=!0;break;case l.keys.BOTTOM:F(0,-l.keyPanSpeed),t=!0;break;case l.keys.LEFT:F(l.keyPanSpeed,0),t=!0;break;case l.keys.RIGHT:F(-l.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),l.update())}(e)}function $(e){if(!1!==l.enabled){switch(e.preventDefault(),e.touches.length){case 1:switch(l.touches.ONE){case r.QmN.ROTATE:if(!1===l.enableRotate)return;X(e),b=d.TOUCH_ROTATE;break;case r.QmN.PAN:if(!1===l.enablePan)return;q(e),b=d.TOUCH_PAN;break;default:b=d.NONE}break;case 2:switch(l.touches.TWO){case r.QmN.DOLLY_PAN:if(!1===l.enableZoom&&!1===l.enablePan)return;!function(e){l.enableZoom&&Z(e),l.enablePan&&q(e)}(e),b=d.TOUCH_DOLLY_PAN;break;case r.QmN.DOLLY_ROTATE:if(!1===l.enableZoom&&!1===l.enableRotate)return;!function(e){l.enableZoom&&Z(e),l.enableRotate&&X(e)}(e),b=d.TOUCH_DOLLY_ROTATE;break;default:b=d.NONE}break;default:b=d.NONE}b!==d.NONE&&l.dispatchEvent(h)}}function ee(e){if(!1!==l.enabled)switch(e.preventDefault(),e.stopPropagation(),b){case d.TOUCH_ROTATE:if(!1===l.enableRotate)return;B(e),l.update();break;case d.TOUCH_PAN:if(!1===l.enablePan)return;Q(e),l.update();break;case d.TOUCH_DOLLY_PAN:if(!1===l.enableZoom&&!1===l.enablePan)return;!function(e){l.enableZoom&&U(e),l.enablePan&&Q(e)}(e),l.update();break;case d.TOUCH_DOLLY_ROTATE:if(!1===l.enableZoom&&!1===l.enableRotate)return;!function(e){l.enableZoom&&U(e),l.enableRotate&&B(e)}(e),l.update();break;default:b=d.NONE}}function te(e){!1!==l.enabled&&(l.dispatchEvent(m),b=d.NONE)}function ne(e){!1!==l.enabled&&e.preventDefault()}l.domElement.addEventListener("contextmenu",ne,!1),l.domElement.addEventListener("mousedown",G,!1),l.domElement.addEventListener("wheel",K,!1),l.domElement.addEventListener("touchstart",$,!1),l.domElement.addEventListener("touchend",te,!1),l.domElement.addEventListener("touchmove",ee,!1),l.domElement.addEventListener("keydown",J,!1),-1===l.domElement.tabIndex&&(l.domElement.tabIndex=0),this.object.lookAt(l.target),this.update(),this.saveState()};(u.prototype=Object.create(r.pBf.prototype)).constructor=u;var l=function(e,t){u.call(this,e,t),this.mouseButtons.LEFT=r.RsA.ROTATE,this.mouseButtons.RIGHT=r.RsA.PAN,this.touches.ONE=r.QmN.ROTATE,this.touches.TWO=r.QmN.DOLLY_PAN};(l.prototype=Object.create(r.pBf.prototype)).constructor=l;var p=function(e,t){u.call(this,e,t),this.mouseButtons.LEFT=r.RsA.PAN,this.mouseButtons.RIGHT=r.RsA.ROTATE,this.touches.ONE=r.QmN.PAN,this.touches.TWO=r.QmN.DOLLY_ROTATE};(p.prototype=Object.create(r.pBf.prototype)).constructor=p;var h=function(e,t){u.call(this,e,t),this.trackball=!0,this.screenSpacePanning=!0,this.autoRotate=!1,this.mouseButtons.LEFT=r.RsA.ROTATE,this.mouseButtons.RIGHT=r.RsA.PAN,this.touches.ONE=r.QmN.ROTATE,this.touches.TWO=r.QmN.DOLLY_PAN};(h.prototype=Object.create(r.pBf.prototype)).constructor=h;class m extends r.aNw{constructor(e){super(e)}load(e,t,n,a){const o=this,s=new r.hH6(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(o.withCredentials),s.load(e,(function(e){let n;try{n=JSON.parse(e)}catch(s){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(e.substring(65,e.length-2))}const a=o.parse(n);t&&t(a)}),n,a)}parse(e){return new d(e)}}class d{constructor(e){this.type="Font",this.data=e}generateShapes(e,t=100){const n=[],a=function(e,t,n){const a=Array.from(e),o=t/n.resolution,s=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*o,i=[];let r=0,c=0;for(let u=0;u<a.length;u++){const e=a[u];if("\n"===e)r=0,c-=s;else{const t=b(e,o,r,c,n);r+=t.offsetX,i.push(t.path)}}return i}(e,t,this.data);for(let o=0,s=a.length;o<s;o++)Array.prototype.push.apply(n,a[o].toShapes());return n}}function b(e,t,n,a,o){const s=o.glyphs[e]||o.glyphs["?"];if(!s)return void console.error('THREE.Font: character "'+e+'" does not exists in font family '+o.familyName+".");const i=new r.T_1;let c,u,l,p,h,m,d,b;if(s.o){const e=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let o=0,s=e.length;o<s;){switch(e[o++]){case"m":c=e[o++]*t+n,u=e[o++]*t+a,i.moveTo(c,u);break;case"l":c=e[o++]*t+n,u=e[o++]*t+a,i.lineTo(c,u);break;case"q":l=e[o++]*t+n,p=e[o++]*t+a,h=e[o++]*t+n,m=e[o++]*t+a,i.quadraticCurveTo(h,m,l,p);break;case"b":l=e[o++]*t+n,p=e[o++]*t+a,h=e[o++]*t+n,m=e[o++]*t+a,d=e[o++]*t+n,b=e[o++]*t+a,i.bezierCurveTo(h,m,d,b,l,p)}}}return{offsetX:s.ha*t,path:i}}function g(){const e=o.useRef(),t=o.useRef();return o.useEffect((()=>function(e,t){function n(){const{width:e}=t.getBoundingClientRect(),n=e*(3/4);u.setPixelRatio(Math.min(2,window.devicePixelRatio)),u.setSize(e,n),o.aspect=e/n,o.updateProjectionMatrix()}const a=new r.xsS;(new r.dpR).load("/img/donut-galaxy-bg-texture.jpg",(e=>{e.wrapS=r.rpg,e.wrapT=r.rpg,e.repeat.set(40,40),a.background=e}));const o=new r.cPb(75,4/3);o.position.z=7;const s=new r.RSm;(new m).load("/fonts/helvetiker_regular.typeface.json",(e=>{const t=new c("blackmann\nwas here",{curveSegments:8,font:e,height:.5,size:1,bevelEnabled:!0,bevelSize:.03,bevelSegments:5,bevelThickness:.03}),n=new r.Kj0(t,s);t.center(),a.add(n)}));const i=new r.XvJ(.2,.1,8,16);for(let c=0;c<150;c++){const e=new r.Kj0(i,s);e.position.x=12*(Math.random()-.5),e.position.y=12*(Math.random()-.5),e.position.z=12*(Math.random()-.5),e.rotation.x=Math.random()*Math.PI,e.rotation.y=Math.random()*Math.PI;const t=.5*Math.random()+.5;e.scale.x=t,e.scale.y=t,e.scale.z=t,a.add(e)}const u=new r.CP7({canvas:e});n();const p=new l(o,e);return p.enableDamping=!0,p.dampingFactor=.02,p.maxDistance=10,p.maxPolarAngle=.8*Math.PI,p.minPolarAngle=.3,p.autoRotate=!0,p.autoRotateSpeed=.7,p.rotateSpeed=.1,function e(){p.update(),u.render(a,o),window.requestAnimationFrame(e)}(),window.addEventListener("resize",n),function(){window.removeEventListener("resize",n)}}(e.current,t.current)),[]),o.createElement("div",{className:i,ref:t},o.createElement("canvas",{ref:e}))}d.prototype.isFont=!0;const f={sidebar_position:1},v="Donuts Galaxy",y={unversionedId:"rnds/donuts-galaxy",id:"rnds/donuts-galaxy",title:"Donuts Galaxy",description:"This experiment is an attempt to clone ilithya.rocks after completing the",source:"@site/docs/rnds/donuts-galaxy.mdx",sourceDirName:"rnds",slug:"/rnds/donuts-galaxy",permalink:"/docs/rnds/donuts-galaxy",draft:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"rnd",previous:{title:"The weekend gave birth to these",permalink:"/docs/rnds"},next:{title:"Wave motion",permalink:"/docs/rnds/wave-motion"}},E={},T=[{value:"Challenges",id:"challenges",level:3}],w={toc:T};function O(e){let{components:t,...n}=e;return(0,s.kt)("wrapper",(0,a.Z)({},w,n,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("h1",{id:"donuts-galaxy"},"Donuts Galaxy"),(0,s.kt)("p",null,"This experiment is an attempt to clone ",(0,s.kt)("a",{parentName:"p",href:"https://www.ilithya.rocks"},"ilithya.rocks")," after completing the\nfirst chapter of threejs journey by ",(0,s.kt)("a",{parentName:"p",href:"https://twitter.com/bruno_simon"},"@bruno_simon")),(0,s.kt)(g,{mdxType:"DonutsGalaxy"}),(0,s.kt)("h3",{id:"challenges"},"Challenges"),(0,s.kt)("p",null,"Some challenges I faced and how I solved them:"),(0,s.kt)("ol",null,(0,s.kt)("li",{parentName:"ol"},(0,s.kt)("p",{parentName:"li"},(0,s.kt)("strong",{parentName:"p"},"Scene background"),": The texture was made in Adobe illustrator, placing the triangle roughly at the center of the square.\nThen setting it up like this:"),(0,s.kt)("pre",{parentName:"li"},(0,s.kt)("code",{parentName:"pre",className:"language-javascript"},"const textureLoader = new TextureLoader()\ntextureLoader.load('/img/donut-galaxy-bg-texture.jpg', (texture) => {\n  texture.wrapS = RepeatWrapping\n  texture.wrapT = RepeatWrapping\n  texture.repeat.set(21, 21)\n  scene.background = texture\n})\n")))))}O.isMDXComponent=!0}}]);